<!DOCTYPE html>
<html lang="en" style="height: 100%">
<head>
<meta charset="utf-8">
</head>

<body style="height: 100%; margin: 0">
<div id="container" style="height: 100%"></div>

<script src="https://fastly.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
<script src="https://fastly.jsdelivr.net/npm/echarts@5.5.1/dist/echarts.min.js"></script>

<script>
  var dom = document.getElementById('container');
  var myChart = echarts.init(dom, null, {
    renderer: 'canvas',
    useDirtyRect: false
  });
  var app = {};
  var ROOT_PATH = 'https://echarts.apache.org/examples';
  var option;

list=["Chiang Mai","Lamphun","Lampang","Uttaradit","Phrae","Nan","Phayao","Chiang Rai","Mae Hong Son","Nakhon Sawan","Uthai Thani","Kamphaeng Phet","Tak","Sukhothai","Phitsanulok","Phichit","Phetchabun"]
thai=["เชียงใหม่","ลำพูน","ลำปาง","อุตรดิตถ์","แพร่","น่านา","พะเยา","เชียงราย","แม่ฮ่องสอน","นครสวรรค์","อุทัยธานี","กำแพงเพชร","ตาก","สุโขทัย","พิษณุโลก","พิจิตร","เพชรบูรณ์"]
emis=["CO2eq","CO","NOX","SO2","VOC","NH3","PM10","PM25","BC","OC","CH4"]
Emission={
  "CO2eq":[71,27.5,21.8,7.6,27.6,6,28.4,120,74,20.6,27.9,46.6,100.9,89.9,181.5,56.1,98.6],
  "CO":  [39,14.2,10.3,3.4,14.5,2.8,8.4,81.9,48.9,7.9,5.8,27.3,61.4,58.4,118.3,35.9,49.8],
  "NOX": [1.6,0.8,0.8,0.3,0.7,0.2,2,1.5,0.8,1.1,2.3,1,1.6,0.6,2.7,1.2,4],
  "SO2": [0.4,0.2,0.1,0.1,0.2,0,0.3,0.4,0.3,0.2,0.3,0.2,0.4,0.3,0.7,0.2,0.6],
  "VOC":[6.8,3,2.8,1,2.9,0.8,6,7.2,4.3,3.4,6.7,4,7.6,4.8,12.2,4.4,12.8],
  "NH3": [1.9,0.7,0.6,0.2,0.7,0.2,0.6,2.6,1.8,0.5,0.7,1.2,2.6,2.5,4.2,1.2,2.1],
  "PM10":[5.5,2.2,1.9,0.7,2.2,0.5,3,7.1,4.7,2,3.2,3.4,7.1,5.9,11.6,3.6,7.9],
  "PM25":[5,2,1.7,0.6,2,0.5,2.8,6.5,4.2,1.8,3.1,3.1,6.4,5.3,10.6,3.3,7.4],
  "BC":  [0.6,0.3,0.3,0.1,0.3,0.1,0.6,0.7,0.4,0.3,0.6,0.4,0.7,0.4,1.2,0.5,1.3],
  "OC":  [4.6,1.8,1.4,0.5,1.8,0.4,1.7,5.6,4.1,1.4,1.9,2.7,6.1,5.7,9.3,2.6,5.2],
  "CH4": [5.6,2.3,1.9,0.7,2.3,0.5,3,6.5,4.5,2,3.3,3.3,7,6,10.7,3.2,7.5],
}
sum=Emission["CO2eq"].reduce((s,v)=>s+v,0)



data={name:"emissions",size:sum,value:sum,children:[]}
list.map((x,i)=>emis.map((y,j)=>
0===j?
(data.children.push({name:x,size:Emission["CO2eq"][i],value:Emission["CO2eq"][i],children:[]})):
(data.children[i].children.push({name:y,size:Emission[y][i],value:Emission[y][i]}))
))
console.log(data)

mytitle={text:'Non-CO2 Emissions (kton/yr) for 17 Provinces of the North',left:'center'}
treemapOption = {
  title:mytitle,
  series:[{type:'treemap',id:'echarts-package-size',animationDurationUpdate:1000,roam:false,nodeClick:undefined,data:data.children,universalTransition:true,breadcrumb:{show:false},
  label:{show:true},
  upperLabel:{show:true,formatter:function(p){return p.data.name}}, //rich:{titleStyle:{backgroundColor:'black',color: '#fff',fontSize: 12,borderWidth:1,borderColor:'white',padding:[0,0,0,0] ,},}
  }]
};
sunburstOption = {
  title:mytitle,
  series:[{type:'sunburst',id:'echarts-package-size',radius:['45%','80%'],animationDurationUpdate:1000,nodeClick:undefined,data:data.children,universalTransition:true,itemStyle:{borderWidth:1,borderColor:'rgba(255,255,255,.5)'},
  levels: [{},
  {r0: '15%',r: '45%',label: {fontSize:12},itemStyle: {borderWidth: 2}, },
  {r0: '45%',r: '85%',label: {position:'outside',align:'left',fontSize: 8}},
  {r0: '85%',r: '99%',label: {position:'outside',padding: 3,silent: false},itemStyle: {borderWidth: 3}} ]
  }]
};

currentOption = treemapOption;
myChart.setOption(currentOption);
setInterval(function () {
  currentOption =
    currentOption === treemapOption ? sunburstOption : treemapOption;
  myChart.setOption(currentOption);
}, 5000);


if (option && typeof option === 'object') {
  myChart.setOption(option);
}

  window.addEventListener('resize', myChart.resize);
</script>
</body>
</html>